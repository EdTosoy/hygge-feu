import{r,T,j as e,I as s,S as V,a as q,f as u,p as L}from"./index-B6cNwYG_.js";import{u as z}from"./index.esm-BelmPDac.js";import{u as p}from"./index-BxNSMkuk.js";import{u as M}from"./UseAppDispatch-ikqRfIpi.js";import{u as $}from"./UseAppSelector-Dqq9XBwt.js";import{s as G}from"./selectors-CO56ze6E.js";import{u as H}from"./useTranslation-BewvAwbW.js";const ee=()=>{const[m,x]=r.useState(null),[f,g]=r.useState(null),{toggleModal:b}=r.useContext(T),{t:o}=H(),{register:l,handleSubmit:h,reset:v}=z(),{username:w,profileId:j,bio:y,avatar:i,wallpaper:n}=$(G)||{},N=M(),P=r.useCallback(a=>{const t=new FileReader;t.onload=()=>{x(t.result)},t.readAsDataURL(a[0])},[]),k=r.useCallback(a=>{const t=new FileReader;t.onload=()=>{g(t.result)},t.readAsDataURL(a[0])},[]),{getRootProps:A,getInputProps:I,isDragActive:D,acceptedFiles:d}=p({onDrop:P}),{getRootProps:R,getInputProps:S,isDragActive:U,acceptedFiles:c}=p({onDrop:k}),F=async a=>{const{newBio:t,newProfileId:C,newUsername:W}=a,B=d.length&&await u(d)||{secure_url:i},_=c.length>0&&await u(c)||{secure_url:n};try{await N(L({bio:t,profileId:C,username:W,avatar:B.secure_url,wallpaper:_.secure_url})).unwrap(),v(),window.location.reload()}catch(E){console.error(E)}};return e.jsxs("form",{className:"w-470 self-start  bg-white rounded-md overflow-hidden",onClick:a=>{a.stopPropagation()},onSubmit:h(F),children:[e.jsxs("div",{className:"h-44 bg-light-violet relative ",children:[e.jsx("div",{className:"h-full overflow-hidden  bg-center bg-no-repeat bg-cover",style:{backgroundImage:`url(${f||n})`},children:e.jsxs("div",{...R(),className:"w-full h-1/2 absolute bottom-0 right-0 grid place-content-center text-2xs overflow-hidden",children:[e.jsx("input",{...S()}),U?e.jsx("div",{className:"rounded-full bg-dark-violet p-2 ",children:e.jsx(s,{className:"text-white text-lg ",children:e.jsx("ion-icon",{name:"cloud-download-outline"})})}):e.jsx("div",{className:"bg-gradient-to-b from-gray-500/0 to-black/70 w-full h-full bg-red absolute bottom-0 right-0 grid items-end justify-end  opacity-85",children:e.jsx("div",{className:"rounded-full bg-dark-violet p-2 cursor-pointer mx-8 my-3  ",children:e.jsx(s,{className:"text-white text-lg ",children:e.jsx("ion-icon",{name:"pencil-outline"})})})})]})}),e.jsx("img",{src:m||i,alt:"avatar preview",className:"w-32 h-32 rounded-full bg-semi-gray absolute -bottom-12  left-8 shadow-2xl"}),e.jsxs("div",{...A(),className:"w-32 h-32 rounded-full absolute -bottom-12  left-8 grid place-content-center text-2xs overflow-hidden",children:[e.jsx("input",{...I()}),D?e.jsx("div",{className:"rounded-full bg-dark-violet p-2 ",children:e.jsx(s,{className:"text-white text-lg ",children:e.jsx("ion-icon",{name:"cloud-download-outline"})})}):e.jsx("div",{className:"bg-gradient-to-b from-gray-500/0 to-black/70 w-full h-2/5 bg-red absolute bottom-0 grid place-content-center opacity-85",children:e.jsx("div",{className:"rounded-full bg-dark-violet p-1  ",children:e.jsx(s,{className:"text-white text-lg ",children:e.jsx("ion-icon",{name:"pencil-outline"})})})})]})]}),e.jsxs("div",{className:"p-8 pt-14 border border-light-gray",children:[e.jsx("input",{type:"text",defaultValue:w,placeholder:"edit username","aria-label":"username-input",className:"w-full border border-light-gray rounded-md px-2 py-1 font-semibold  my-2 focus:outline-none focus:border-dark-violet focus:border-2",...l("newUsername",{required:!0})}),e.jsx("input",{type:"text",defaultValue:j,placeholder:"edit profile id","aria-label":"profileId-input",className:"w-full border border-light-gray rounded-md px-2 py-1 text-xs focus:outline-none focus:border-dark-violet focus:border-2",...l("newProfileId",{required:!0})}),e.jsx("input",{type:"text",defaultValue:y,placeholder:"add bio","aria-label":"bio-input",className:"w-full border border-light-gray rounded-md px-2 py-1 text-sm italic my-4 focus:outline-none focus:border-dark-violet focus:border-2",...l("newBio")}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-sm",children:["0 ",o("translation.profileSummary.likes")]}),e.jsxs("p",{className:"text-sm",children:["0 ",o("translation.profileSummary.connections")]}),e.jsxs("p",{className:"text-sm",children:["0 ",o("translation.profileSummary.posts")]})]}),e.jsxs("div",{className:"flex  gap-4 justify-end items-center mt-4",children:[e.jsx(V,{text:"Cancel",className:"px-3 py-1 rounded-full text-sm",onClick:()=>{b()}}),e.jsx(q,{text:o("translation.button.save"),type:"submit",className:"px-6 py-1 rounded-full text-sm"})]})]})]})};export{ee as EditUserProfile};
