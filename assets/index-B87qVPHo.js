import{j as e,P as $,I as s,C as M,d as R}from"./index-B6cNwYG_.js";import{f as h,D as b}from"./format-yxS38KLK.js";import{u as W}from"./UseAppDispatch-ikqRfIpi.js";import{u as q}from"./UseAppSelector-Dqq9XBwt.js";import{s as B}from"./selectors-CO56ze6E.js";import{u as L}from"./index.esm-BelmPDac.js";import{u as O}from"./useTranslation-BewvAwbW.js";const Y=({post:j,handleDeletePost:g,handleEditPost:f,handleLikePost:v,toggleShowOptions:N,handleOnClickComment:y,handleSavePost:w,isModalView:P})=>{const{register:k,handleSubmit:C,reset:l}=L(),r=q(B),{t:o}=O(),{_id:a,username:D,content:I,title:A,comments:c,createdAt:_,likes:d,showOptions:U,userAvatar:m,mediaUrl:n,savedBy:i,userId:x}=j,F=W(),p=!!d.includes(r._id),T=!!(i!=null&&i.includes(r._id)),z=r&&r._id===x,E=async t=>{const{comment:u}=t,S={postId:a,date:h(new Date,b),comment:u};u?(await F(R(S)).unwrap(),l(),window.location.reload()):console.log("there is no comment"),l()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:" border-b border-light-gray relative w-660",onClick:t=>{t.preventDefault(),t.stopPropagation()},children:[e.jsxs("div",{className:"flex justify-between my-4 items-center",children:[e.jsx($,{userAvatar:m,date:h(_,b),username:D,profileUserId:x,avatar:m}),e.jsx(s,{className:"text-xl ",onClick:t=>{t.preventDefault(),t.stopPropagation(),N()},children:e.jsx("ion-icon",{name:"ellipsis-horizontal-outline"})}),U&&e.jsx("div",{className:"w-195 border border-light-gray bg-white z-10 absolute top-8 -right-4 rounded-md shadow-2xl text-sm ",children:z?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-5 border-b border-light-gray cursor-pointer",onClick:f,children:o("translation.button.editPost")}),e.jsx("div",{className:"p-5 border-b border-light-gray cursor-pointer",onClick:g,children:o("translation.button.deletePost")})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-5 border-b border-light-gray cursor-pointer",children:o("translation.button.hide")}),e.jsx("div",{className:"p-5 border-b border-light-gray cursor-pointer",children:o("translation.button.report")})]})})]}),e.jsxs("h1",{className:"font-semibold",children:[A,"..."]}),e.jsx("p",{children:I}),n&&e.jsx("div",{children:e.jsx("img",{src:n,alt:n})}),e.jsxs("div",{className:"flex justify-between my-7",children:[e.jsxs("div",{className:"flex gap-1 text-xl items-center",children:[e.jsx(s,{onClick:t=>{t.preventDefault(),t.stopPropagation(),v(a)},className:`${p?"text-accent-red ":""}`,children:e.jsx("ion-icon",{name:`${p?"heart":"heart-outline"}`})}),e.jsx("p",{className:"text-sm",children:d.length})]}),e.jsxs("div",{className:"flex gap-1 text-xl items-center",children:[e.jsx(s,{onClick:y,children:e.jsx("ion-icon",{name:"chatbox-outline"})}),e.jsx("p",{className:"text-sm",children:c.length})]}),e.jsx("div",{className:"flex gap-1 text-xl items-center",children:e.jsx(s,{onClick:t=>{t.preventDefault(),t.stopPropagation(),w(a)},children:e.jsx("ion-icon",{name:`${T?"image":"image-outline"}`})})})]})]},a),P&&e.jsxs("div",{onClick:t=>{t.preventDefault(),t.stopPropagation()},className:"pt-2",children:[c.map(t=>e.jsx(M,{commentData:t},t.userId)),e.jsxs("form",{className:"relative",children:[e.jsx("textarea",{placeholder:"Write a comment...","aria-label":"comment-input",className:"w-full border my-3 p-3 border-light-gray rounded-md text-xs focus:outline-none focus:border-dark-violet focus:border-2",rows:4,...k("comment")}),e.jsx("button",{className:"absolute right-3 bottom-6 ",type:"submit","aria-label":"comment-send-button",onClick:C(E),children:e.jsx(s,{className:"text-xl",children:e.jsx("ion-icon",{name:"send-outline"})})})]})]})]})};export{Y as PostWrapper};
