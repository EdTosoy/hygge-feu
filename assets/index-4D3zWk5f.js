import{r as s,T as C,j as e,P as I,I as n,S as R,a as T,f as U,c as S}from"./index-B6cNwYG_.js";import{u as F}from"./index.esm-BelmPDac.js";import{s as M}from"./selectors-CO56ze6E.js";import{p as Y}from"./postTitle-DbFQgPd-.js";import{u as B}from"./UseAppDispatch-ikqRfIpi.js";import{u as E}from"./UseAppSelector-Dqq9XBwt.js";import{f as _,M as z}from"./format-yxS38KLK.js";import{u as V}from"./index-BxNSMkuk.js";import{u as G}from"./useTranslation-BewvAwbW.js";const X=()=>{const{t:i}=G(),p=_(new Date,z),{toggleModal:u}=s.useContext(C),{_id:a,username:r,avatar:m}=E(M)||{},x=B(),{register:l,handleSubmit:g,reset:h}=F(),[f,v]=s.useState(void 0),c=s.useRef(),j=t=>{t.preventDefault(),t.stopPropagation(),c.current.click()},y=s.useCallback(t=>{const o=new FileReader;o.onload=()=>{v(o.result)},o.readAsDataURL(t[0])},[]),{getRootProps:b,getInputProps:N,acceptedFiles:d}=V({onDrop:y}),w=async t=>{const{content:o,mediaUrl:P,category:A}=t,k=d.length&&await U(d)||{secure_url:P};if(a&&r&&o)try{await x(S({content:o,title:Y(o),mediaUrl:k.secure_url,userId:a,username:r,category:A})).unwrap(),h(),window.location.reload()}catch(D){console.error(D)}else console.log("there is no content or Not Authorize ")};return e.jsxs("form",{className:"py-6 px-4 w-598",onClick:t=>{t.stopPropagation()},onSubmit:g(w),children:[e.jsxs("div",{className:"mb-4 flex justify-between",children:[e.jsx(I,{avatar:m||"",username:r||"",profileUserId:a||""}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("p",{className:"text-xs",children:i("translation.addPost.postTo")}),e.jsxs("select",{className:"w-28 h-8 rounded-lg bg-light-violet text-xs px-2 py-1",defaultValue:"arts","aria-label":"post-to-select",...l("category"),children:["/// get options from the backend",e.jsx("option",{value:"arts",children:"Arts"}),e.jsx("option",{value:"music",children:"Music"}),e.jsx("option",{value:"video-editing",children:"Video Editing"}),e.jsx("option",{value:"gaming",children:"Gaming"}),e.jsx("option",{value:"information-technology",children:"Information Technology"}),e.jsx("option",{value:"business-administration",children:"Business Administration"})]})]})]}),e.jsxs("div",{className:"w-full  bg-light-gray rounded-xl border border-light-violet focus:outline-none focus:border-dark-violet",children:[e.jsx("textarea",{className:"w-full  p-3 font-light  bg-light-gray focus:outline-none",placeholder:`Today is ${p}...`,"aria-label":"post-content-input",rows:7,...l("content")}),e.jsx("div",{className:"p-3",children:e.jsx("img",{src:f,className:"rounded-xl overflow-hidden"})})]}),e.jsxs("div",{className:"flex items-center  mt-4",children:[e.jsxs("div",{className:"w-full p-3 flex gap-1",children:[e.jsxs("div",{...b(),children:[e.jsx("input",{className:"hidden",onChange:t=>{t.preventDefault(),t.stopPropagation()},...N(),ref:t=>{c.current=t}}),e.jsx("button",{onClick:j,children:e.jsx(n,{className:"text-2xl text-dark-violet hover:bg-light-gray p-3 rounded-full",children:e.jsx("ion-icon",{name:"images-outline"})})})]}),e.jsx(n,{className:"text-2xl  text-dark-violet hover:bg-light-gray p-3 rounded-full",children:e.jsx("ion-icon",{name:"people-outline"})}),e.jsx(n,{className:"text-2xl  text-dark-violet hover:bg-light-gray p-3 rounded-full",children:e.jsx("ion-icon",{name:"happy-outline"})})]}),e.jsxs("div",{className:"flex  gap-4 justify-end items-center",children:[e.jsx(R,{text:"Cancel",className:"px-3 py-1 rounded-full text-sm",onClick:()=>{u()}}),e.jsx(T,{text:i("translation.button.post"),type:"submit",className:"px-6 py-1 rounded-full text-sm"})]})]})]})};export{X as AddPost};
